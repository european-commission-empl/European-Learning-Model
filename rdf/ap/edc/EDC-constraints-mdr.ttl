@prefix :    <https://data.europa.eu/snb/model/edc-constraints-mdr#>.
@prefix dc:     <http://purl.org/dc/terms/>.
@prefix xsd:    <http://www.w3.org/2001/XMLSchema#>.
@prefix esco:   <http://data.europa.eu/esco/model#>.
@prefix foaf:   <http://xmlns.com/foaf/0.1/>.
@prefix adms:   <http://www.w3.org/ns/adms#>.
@prefix rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix rdfs:   <http://www.w3.org/2000/01/rdf-schema#>.
@prefix org:    <http://www.w3.org/ns/org#>.
@prefix rov:    <http://www.w3.org/ns/regorg#>.
@prefix dcat:   <http://www.w3.org/ns/dcat#>.
@prefix elm:    <https://data.europa.eu/snb/model#>.
@prefix edc:    <https://data.europa.eu/snb/model/edc-constraints#>.
@prefix cpv:    <https://www.w3.org/ns/person#>.
@prefix owl:    <http://www.w3.org/2002/07/owl#>.
@prefix cc:     <http://creativecommons.org/ns#>.
@prefix skos:   <http://www.w3.org/2004/02/skos/core#>.
@prefix person: <http://www.w3.org/ns/person#>.
@prefix rov:    <http://www.w3.org/ns/regorg#>.
@prefix adms:   <http://www.w3.org/ns/adms#>.
@prefix vc:     <http://data.europa.eu/snb/model/w3c/vc#>.
@prefix vp:     <http://data.europa.eu/snb/model/w3c/vp#>.
@prefix sh:     <http://www.w3.org/ns/shacl#> .

<https://data.europa.eu/snb/model/edc-constraints-mdr>
  a owl:Ontology;
  owl:imports rdf:;
  owl:import dc:;
  owl:imports org:;
  owl:imports elm:;
  owl:imports person:;
  owl:imports adms:;
  owl:imports foaf:;
  owl:imports vc:;
  owl:imports vp:;
  owl:imports elm:;
  owl:imports edc:;
  owl:imports skos:;
  owl:imports sh:;
  rdfs:label "Controlled Vocabularies SHACL constraints for EDC Application Profile"@en;
  dc:created "2021-09-25"^^xsd:date;
  dc:modified "2022-07-12"^^xsd:date;
  dc:title "SHACL constraints for the controlled vocabularies used by European Digital Credentials application profile"@en;
  dc:description '''EDC constraints for the controlled vocabularies used by EDC application profile, provides the constraints on controlled vocabularies used.'''@en;
  rdfs:comment "This document specifies the set SHACL constraints on classes and properties used in the EDC application profile, with respect to the controlled vocabularies used."@en;
  owl:versionInfo "1.0.0";
  dc:publisher <http://publications.europa.eu/resource/authority/corporate-body/DEMP>;
  cc:attributionURL <http://ec.europa.eu/> ;
  dc:license <https://creativecommons.org/licenses/by/4.0/>;
 # dc:creator [foaf:mbox "natasa.sofou@gmail.com"; foaf:name "Natasa Sofou"];  
 # dc:contributor [foaf:mbox ""; foaf:name ""]; # to be added 
  .
#----------------------- Restrictions ------------------------------
#-------------------------------------------------------------------
#--------------- Mandatory Controlled Vocabularies -----------------
#-------------------------------------------------------------------
:AccreditationTypeRestriction
    a sh:NodeShape ;
    rdfs:comment "Accreditation Type restriction" ;
    rdfs:label "Accreditation Type restriction" ;
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/accreditation/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .  

:ThematicAreaRestriction
    a sh:NodeShape ;
    rdfs:comment "Thematic Area restriction";
    rdfs:label "Thematic Area restriction";
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/isced-f/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .

:EQFLevelRestriction
    a sh:NodeShape ;
    rdfs:comment "EQF Level restriction" ;
    rdfs:label "EQF Level restriction" ;
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/eqf/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .  
:JurisdictionRestriction
    a sh:NodeShape ;
    rdfs:comment "Jurisdiction restriction" ;
    rdfs:label "Jurisdiction restriction" ;
    sh:property [
        sh:hasValue <http://publications.europa.eu/resource/authority/atu> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .  
:CountryRestriction
    a sh:NodeShape ;
    rdfs:comment "Country restriction" ;
    rdfs:label "Country restriction" ;
    sh:property [
        sh:hasValue <http://publications.europa.eu/resource/authority/country> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .  
# :CreditSystemRestriction
#     a sh:NodeShape ;
#     rdfs:comment "Credit System restriction" ;
#     rdfs:label "Credit System restriction" ;
#     sh:property [
#         sh:hasValue <http://data.europa.eu/snb/education-credit/25831c2> ;
#         sh:nodeKind sh:IRI ;
#         sh:path skos:inScheme
#     ] .  
:AmountUnitRestriction
    a sh:NodeShape ;
    rdfs:comment "Amount Unit restriction" ;
    rdfs:label "Amount Unit restriction" ;
    sh:property [
        sh:hasValue <http://publications.europa.eu/resource/authority/currency> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] . 

:EuropassCredentialTypeRestriction
    a sh:NodeShape ;
    rdfs:comment "Europass Credential Type restriction";
    rdfs:label "Europass Credential Type restriction";
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/credential/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ].

:EscoOccupationRestriction
    a sh:NodeShape ;
    rdfs:comment "ESCO Occupation restriction" ;
    rdfs:label "ESCO Occupation restriction" ;
    sh:property [
        sh:pattern "^http://data.europa.eu/esco/occupation" ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] . 

:LanguageRestriction
    a sh:NodeShape ;
    rdfs:comment "Language restriction";
    rdfs:label "Language restriction";
    sh:property [
        sh:hasValue <http://publications.europa.eu/resource/authority/language> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .

:LearningSettingRestriction
    a sh:NodeShape ;
    rdfs:comment "Learning Setting restriction";
    rdfs:label "Learning Setting restriction";
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/learning-setting/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .

:LearningEntitlementStatusRestriction
    a sh:NodeShape ;
    rdfs:comment "Learning Entitlement Status restriction" ;
    rdfs:label "Learning Entitlement Status restriction" ;
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/entitlement-status/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ].

:NQFLevelRestriction
    a sh:NodeShape ;
    rdfs:comment "NQF Level restriction" ;
    rdfs:label "NQF Level restriction" ;
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/qdr/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .

:LearningOutcomeTypeRestriction
    a sh:NodeShape ;
    rdfs:comment "Learning Outcome Type restriction" ;
    rdfs:label "Learning Outcome Type restriction" ;
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/skill-type/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .

:ReusabilityLevelRestriction
    a sh:NodeShape ;
    rdfs:comment "Reusability Level restriction" ;
    rdfs:label "Reusability Level restriction" ;
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/skill-reuse-level/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] . 

:EscoSkillRestriction
    a sh:NodeShape ;
    rdfs:comment "ESCO Skill restriction" ;
    rdfs:label "ESCO Skill restriction" ;
    sh:property [
        sh:pattern "^https://ec.europa.eu/esco/skill/" ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] . 

:LearningOpportunityTypeRestriction
    a sh:NodeShape ;
    rdfs:comment "Learning Opportunity Type Restriction";
    rdfs:label "Learning Opportunity Type Restriction";
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/learning-opportunity/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .

:VerificationCheckStatusRestriction
    a sh:NodeShape ;
    rdfs:comment "Verification Check Status restriction" ;
    rdfs:label "Verification Check Status restriction" ;
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/verification-status/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .   

:VerificationCheckTypeRestriction
    a sh:NodeShape ;
    rdfs:comment "Verification Check Type restriction" ;
    rdfs:label "Verification Check Type restriction" ;
    sh:property [
        sh:hasValue <http://data.europa.eu/snb/verification/25831c2> ;
        sh:nodeKind sh:IRI ;
        sh:path skos:inScheme
    ] .    

:AccreditationStatusRestriction  
    a sh:NodeShape ; 
    rdfs:comment "Accreditation Status restriction" ;
    rdfs:label "Accreditation Status restriction" ;
    sh:property [  
         sh:nodeKind sh:IRI ;
         sh:hasValue <https://publications.europa.eu/resource/authority/snb/status/25831c2>;
         sh:nodeKind sh:IRI ;
         sh:path skos:inScheme;
         sh:severity sh:Violation;
    ].
#-------------------------------------------------------------------    
#--------------------------------------------------------------------------------------------- 
#------------------ CLass and property shapes with applied restrictions ----------------------
#---------------------------------------------------------------------------------------------    
# Only mandatory vocabulary restrictions are included.
#---------------------------------------------------------------------------------------------

:AccreditationShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:Accreditation;
    #rdfs:label "CV Restrictions for  Accreditation Shape"@en;
    sh:property[
        sh:node  :AccreditationTypeRestriction;
        sh:nodeKind sh:IRI ;
        sh:name "type"@en;
        sh:path dc:type;
        sh:minCount 1;
        sh:maxCount 1;
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node :ThematicAreaRestriction;
        sh:nodeKind sh:IRI ;
        sh:name "accredited for thematic area"@en;
        sh:path elm:limitField;
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node :EQFLevelRestriction;
        sh:nodeKind sh:IRI ;
        sh:name "accredited for EQF level"@en;
        sh:path elm:limitEQFLevel;
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node  :JurisdictionRestriction;
        sh:nodeKind sh:IRI ;
        sh:name "accredited in jurisdiction"@en;
        sh:path elm:limitJurisdiction;
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node :AccreditationStatusRestriction;
        sh:path elm:status;
        sh:name "status"@en;
        sh:maxCount 1;
        sh:severity sh:Violation;
    ];
.
#-------------------------------------------   
:AddressShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:Address;
    #rdfs:label "CV Restrictions for Address Shape"@en;
    sh:property [
        sh:node :CountryRestriction;
        sh:nodeKind sh:IRI ;
        sh:path elm:countryCode;
        sh:name"country"@en;
        sh:minCount 1;
        sh:maxCount 1;
        sh:severity sh:Violation
    ];
.
#-------------------------------------------
:AmountShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:Amount;
    #rdfs:label "CV Restrictions for Amount Shape"@en;
    sh:property [
        sh:node :AmountUnitRestriction;
        sh:nodeKind sh:IRI;
        sh:path elm:unit;
        sh:name "unit"@en;
        sh:minCount 1;
        sh:maxCount 1;
        sh:severity sh:Violation;
    ].
#-------------------------------------------
# :CreditPointShapeCV
#     a sh:NodeShape;  
#     sh:targetClass elm:CreditPoint;
#     sh:property [
#         sh:node :CreditSystemRestriction;
#         sh:nodeKind sh:IRI;
#         sh:path elm:framework;
#         sh:minCount 1;
#         sh:maxCount 1;
#         sh:name "framework"@en;
#         sh:severity sh:Violation;
#     ].    
#-------------------------------------------
:EuropassCredentialShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:EuropassCredential;
    #rdfs:label "CV Restrictions for Europass Credential Shape"@en;
    sh:property [
        sh:node :EuropassCredentialTypeRestriction;
        sh:nodeKind sh:IRI ;
        sh:name"type"@en;
        sh:path dc:type;
        sh:severity sh:Violation
    ];
    sh:property[
        sh:node :LanguageRestriction;
        sh:nodeKind sh:IRI ;
        sh:path elm:primaryLanguage;
        sh:minCount 1;
        sh:maxCount 1;
        sh:name "primary language";
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node :LanguageRestriction;
        sh:nodeKind sh:IRI ;
        sh:path dc:language;
        sh:minCount 1;
        sh:name "available language";
        sh:severity sh:Violation; 
        ];
    .
#-------------------------------------------
:LearningAchievementSpecificationShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:LearningAchievementSpecification;
    #rdfs:label "CV Restrictions for Learning Achievement Specification Shape"@en;
    sh:property [
        sh:node :ThematicAreaRestriction;
        sh:nodeKind sh:IRI;
        sh:name"thematic area"@en;
        sh:path elm:ISCEDFCode;
        sh:severity sh:Violation;
    ];
     sh:property[
        sh:node :LanguageRestriction;
        sh:nodeKind sh:IRI;
        sh:path dc:language;
        sh:name "language";
        sh:severity sh:Violation; 
        ];
    sh:property[
        sh:node :LearningSettingRestriction;
        sh:nodeKind sh:IRI ;
        sh:name"learning setting"@en;
        sh:maxCount 1 ;
        sh:path elm:learningSetting;
        sh:severity sh:Violation;
    ];
.
#-------------------------------------------  
:LearningActivitySpecificationShapeCV 
    a sh:NodeShape;  
    sh:targetClass elm:LearningActivitySpecification;
    #rdfs:label "CV Restrictions for Learning Activity Specification Shape"@en;
    sh:property[
        sh:node :LanguageRestriction;
        sh:nodeKind sh:IRI;
        sh:path dc:language;
        sh:name "language";
        sh:severity sh:Violation; 
        ];
.
#-------------------------------------------    
:LearningAssessmentSpecificationShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:LearningAssessmentSpecification;
    #rdfs:label "CV Restrictions for Learning Assessment Specification Shape"@en;
    sh:property [
        sh:node :LanguageRestriction;
        sh:nodeKind sh:IRI ;
        sh:name"language"@en;
        sh:path dc:language;
        sh:severity sh:Violation;
    ];
.
#-------------------------------------------  
  :LearningEntitlementSpecificationShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:LearningEntitlementSpecification;
    #rdfs:label "CV Restrictions for Learning Entitlement Specification Shape"@en;
    sh:property[
        sh:node  :JurisdictionRestriction;
        sh:nodeKind sh:IRI ;
        sh:name "valid within"@en;
        sh:path elm:limitJurisdiction;
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node :LearningEntitlementStatusRestriction;
        sh:nodeKind sh:IRI ;
        sh:name "status"@en;
        sh:path elm:status;
        sh:minCount 1;
        sh:maxCount 1;
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node :EscoOccupationRestriction;
        sh:nodeKind sh:IRI;
        sh:name "related occupation"@en;
        sh:path elm:limitOccupation;
        sh:severity sh:Violation;
    ]
    .
#-------------------------------------------  
:LegalIdentifierShapeCV
a sh:NodeShape;
    sh:targetClass elm:LegalIdentifier;
    #rdfs:label "CV Restrictions for Legal Identifier Shape"@en;
    sh:property[
        sh:node :CountryRestriction;
        sh:nodeKind sh:IRI ;
        sh:path dc:spatial;
        sh:minCount 1;
        sh:maxCount 1;
        sh:name "spatial"@en;
        sh:severity sh:Violation;
    ];
.
#------------------------------------------- 
:QualificationShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:Qualification;
    #rdfs:label "CV Restrictions for Qualification Shape"@en;
    sh:property [
        sh:node :ThematicAreaRestriction;
        sh:nodeKind sh:IRI;
        sh:name"thematic area"@en;
        sh:path elm:ISCEDFCode;
        sh:severity sh:Violation;
    ];
    sh:property [
        sh:node :LanguageRestriction;
        sh:nodeKind sh:IRI;
        sh:path dc:language;
        sh:name "language";
        sh:severity sh:Violation; 
        ];
    sh:property [
        sh:node :LearningSettingRestriction;
        sh:nodeKind sh:IRI ;
        sh:name"learning setting"@en;
        sh:maxCount 1 ;
        sh:path elm:learningSetting;
        sh:severity sh:Violation;
    ];
    sh:property [
        sh:node :EQFLevelRestriction;
        sh:nodeKind sh:IRI ;
        sh:name"EQF level"@en;
        sh:path elm:EQFLevel;
        sh:maxCount 1;
        sh:severity sh:Violation;
    ];
    sh:property [
        sh:node :NQFLevelRestriction;
        sh:nodeKind sh:IRI ;
        sh:name"NQF level"@en;
        sh:path elm:NQFLevel;
        sh:severity sh:Violation;
    ].
#-------------------------------------------
:LearningOutcomeShapeCV
    a sh:NodeShape;
    sh:targetClass elm:LearningOutcome;
    #rdfs:label "CV Restrictions for Learning Outcome Shape"@en;
    sh:property[
        sh:node :LearningOutcomeTypeRestriction;
        sh:nodeKind sh:IRI;
        sh:name"type"@en;
        sh:maxCount 1;
        sh:path dc:type;
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node :ReusabilityLevelRestriction;
        sh:nodeKind sh:IRI;
        sh:maxCount 1 ;
        sh:name "reusability level"@en;
        sh:path elm:reusabilityLevel;
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node :EscoSkillRestriction;
        sh:nodeKind sh:IRI;
        sh:path elm:relatedESCOSkill;
        sh:name "related ESCO skill(s)"@en;
        sh:severity sh:Violation;
    ];
    .
#-------------------------------------------
:LearningOpportunityShapeCV
    a sh:NodeShape;
    sh:targetClass elm:LearningOpportunity;
    #rdfs:label "CV Restrictions for Learning Opportunity Shape"@en;
    sh:property [
        sh:node :LanguageRestriction;
        sh:nodeKind sh:IRI;
        sh:name"default language"@en;
        sh:path elm:defaultLanguage;
        sh:maxCount 1;
        sh:severity sh:Violation;
    ];
    .

#-------------------------------------------
:PersonShapeCV
    a sh:NodeShape;
    sh:targetClass elm:Person;
    #rdfs:label "CV Restrictions for Person Shape"@en;
    sh:property [
        sh:node :CountryRestriction;
        sh:nodeKind sh:IRI;
        sh:name "citizenship"@en;
        sh:path elm:citizenshipCountry;
        sh:severity sh:Violation;
    ].

#-------------------------------------------
:NoteShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:Note;
    #rdfs:label "CV Restrictions for Note Shape"@en;
    sh:property [
        sh:node :LanguageRestriction;
        sh:nodeKind sh:IRI ;
        sh:maxCount 1;
        sh:name"language"@en;
        sh:path dc:language;
        sh:severity sh:Violation;
    ].
#-------------------------------------------    
:WebResourceShapeCV
    a sh:NodeShape;
    sh:targetClass elm:WebResource;
    #rdfs:label "CV Restrictions for Web Resource Shape"@en;
    sh:property [
        sh:node :LanguageRestriction;
        sh:nodeKind sh:IRI;
        sh:maxCount 1;
         sh:name"language"@en;
        sh:path dc:language;
        sh:severity sh:Violation;
    ].
 #-------------------------------------------
:VerificationCheckShapeCV
    a sh:NodeShape;  
    sh:targetClass elm:VerificationCheck;
    #rdfs:label "CV Restrictions for Verification Check Shape"@en;
    sh:property[
        sh:node :VerificationCheckTypeRestriction;
        sh:nodeKind sh:IRI;
        sh:name"type"@en;
        sh:minCount 1;
        sh:maxCount 1;
        sh:path dc:type;
        sh:severity sh:Violation;
    ];
    sh:property[
        sh:node :VerificationCheckStatusRestriction;
        sh:nodeKind sh:IRI ;
        sh:name"status"@en;
        sh:path elm:status;
        sh:minCount 1;
        sh:maxCount 1;
        sh:severity sh:Violation;
    ].   